import express from 'express'
import { Request, Response } from 'express'


//express section
import expressSession from 'express-session'

const app = express()

// Add this line
app.use(
  expressSession({
    secret: 'Tecky Academy teaches typescript',
    resave: true,
    saveUninitialized: true,
  }),
)

declare module 'express-session' {
  interface SessionData {
    name?: string
  }
}


app.get('/', function (req: Request, res: Response) {
  res.end('Hello World')
})
app.get('/name', (req, res) => {
    req.session.name = 'Tecky Academy'
    console.log(req.session)
    res.write(req.session.name)
    res.end()
  })

const PORT = 8080

app.listen(PORT, () => {
  console.log(`Listening at http://localhost:${PORT}/`)
})